[返回主页](./../README.md)

# 阶段 1 预接触

## 1 概述

        本节旨在介绍和解释在渗透测试的预接触阶段可用的工具和技术。这里的信息来自于全球一些最成功的渗透测试人员多年的经验积累。

        如果您是寻求渗透测试的客户，我们强烈建议您查看本文件中的常见问题解答部分。此部分涵盖在测试开始之前应回答的关键问题。请记住，渗透测试不应是对抗性的，不是为了验证测试人员是否能攻破您的系统，而是为了识别与潜在攻击相关的业务风险。

        为确保获得最大价值，请确保本文件中的问题都得到解决。此外，随着范围界定工作的进展，一个优秀的测试公司将开始提出针对您组织的额外问题。

## 2 范围介绍

        定义测试范围是渗透测试中至关重要的一部分，同时也是最容易被忽视的环节之一。尽管关于如何使用不同工具和技术访问网络的资料很多，但有关渗透前准备工作的内容却很少。未能妥善完成预接触活动可能会导致一系列问题，包括测试范围的扩散、客户不满，甚至法律问题。项目范围明确规定了需要测试的内容。每个测试环节将如何进行将在交战规则部分详细说明。

        界定测试范围的一个关键方面是规划测试人员的时间分配。例如，一个客户要求测试100个IP地址，费用为10万美元。这意味着客户为每个IP地址支付1000美元。然而，这种成本结构仅在如此大规模时有效。一些测试人员常犯的错误是保持线性成本。如果客户只要求测试一个关键业务应用，而定价结构仍是每1000美元一个IP地址，尽管测试人员只需测试一个IP，但工作量可能会大幅增加。因此，成本应根据实际工作量进行调整，否则公司可能会发现自己低估了服务费用，导致工作质量不够全面。

        尽管有一个合理的定价结构，过程并非总是清晰明了。客户常常不清楚究竟需要测试什么，也可能不善于有效传达他们对测试的期望。在预接触阶段，测试人员应能够引导客户处理他们可能不熟悉的领域。测试人员必须理解，专注于单一应用的高强度测试与对广泛IP地址进行入侵测试的目标之间的区别。

## 3 时间估算指标

        时间估算与测试人员在特定领域的经验直接相关。如果测试人员在某种测试中经验丰富，他通常能够直观地判断所需时间。如果经验较少，可以通过查看公司过去类似测试的电子邮件和扫描日志来估算当前测试的时间需求。在确定测试时间后，通常建议增加20%的时间作为缓冲。

        这额外的20%称为缓冲时间，也被称作顾问开销。这对于任何测试都是必需的，提供了应对测试过程中可能中断的余地。例如，网络可能会中断，或发现重大漏洞，需要与多个管理层进行会议来解决。这些事件都可能耗时，如果没有缓冲时间，可能会严重影响原始时间估算。

        如果最终不需要这20%的缓冲时间，向客户收取未工作的时间是不道德的。因此，测试人员应提供额外的价值，如向安全团队详细讲解漏洞利用过程，提供额外的执行摘要，或花更多时间解决初次测试中未解决的漏洞。

        时间管理的另一个关键是每个项目需有明确的截止日期。所有成功的项目都有明确的开始和结束。您需要签署工作说明书，明确规定在特定日期结束测试，或在此日期后要求的额外工作。尽管有些测试人员可能觉得谈论成本和时间有点棘手，经验表明，如果在主要测试中提供了高质量的服务，客户通常愿意为额外工作付费。

## 4 范围界定会议

        通常情况下，范围界定会议在合同签署后进行。有时可以在签署合同前讨论范围相关话题，但这种情况较少。在这些情况下，建议先签署保密协议。

        范围界定会议的目的是讨论测试内容，不涉及交战规则和费用。每个主题应在专门的会议中讨论，因为不明确的焦点会导致讨论混乱。重要的是保持讨论的专注，防止偏题，并在必要时将某些话题留待线下讨论。

        当项目的初步估算（ROM）值确定后，需要与客户开会验证假设。首先，明确参与测试的IP范围。客户可能认为测试人员应自行识别并攻击他们的网络，以确保测试真实。这虽是理想情况，但法律后果必须优先考虑。测试人员有责任向客户说明这些顾虑，并强调明确范围的重要性。例如，应核实客户拥有所有目标环境，包括DNS服务器、邮件服务器、运行Web服务器的硬件以及防火墙/IDS/IPS解决方案。许多公司将这些设备的管理外包给第三方。

此外，还需明确目标环境所在的国家、省份和州。法律因地区而异，这可能影响测试。例如，欧盟国家以严格的隐私法律著称，这可能会显著改变社会工程测试的实施方式。

## 5 额外支持的小时费率

        对于任何不在约定范围内的请求，都需要谨慎处理。首先，这有助于防止范围蔓延。范围的扩大会消耗更多资源，可能会侵蚀测试人员的利润，并可能导致客户的困惑或不满。另一个许多测试人员在临时处理额外工作时未考虑的问题是法律责任。许多临时请求没有被妥善记录，这在发生争议或法律问题时会使责任界定变得困难。此外，合同是一份法律文件，明确规定了要完成的工作，应与测试许可备忘录紧密关联。

        对于任何超出原始范围的请求，都应记录为详细的工作说明书，明确所需的工作内容。我们建议在合同中明确说明，额外工作将按小时收费，并且须明确指出，任何额外工作需在相关工作说明书签署并确认后才能进行。

## 6 问卷调查

        在与客户的初步沟通中，需要客户回答一些问题，以便准确评估项目范围。这些问题旨在更好地了解客户希望通过渗透测试实现的目标、他们进行渗透测试的原因，以及是否希望在测试过程中进行某些特定类型的测试。以下是此阶段可能会问到的一些示例问题。

## 7 一般问题

### 7.1 网络渗透测试

1. 客户为什么要对其环境进行渗透测试？

2. 这次渗透测试是否为了满足特定的合规要求？

3. 客户希望在何时进行渗透测试的具体操作部分（如扫描、枚举、利用等）？
   
   - 工作时间内？
   - 工作时间外？
   - 周末？

4. 需要测试的IP地址总数是多少？
   
   - 如果适用，有多少内部IP地址？
   - 如果适用，有多少外部IP地址？

5. 是否存在可能影响渗透测试结果的设备，例如防火墙、入侵检测/防御系统、Web应用防火墙或负载均衡器？

6. 如果一个系统被攻破，测试团队应该如何继续？
   
   - 对被攻破的机器进行本地漏洞评估？
   - 尝试在被攻破的机器上获取最高权限（如Unix机器上的root权限，Windows机器上的SYSTEM或管理员权限）？
   - 对获取的本地密码哈希（例如，Unix机器上的/etc/shadow）进行不攻击、最小攻击、字典攻击或穷举攻击？

### 7.2 Web 应用渗透测试

1. 需要评估多少个 Web 应用？

2. 需要评估多少个登录系统？

3. 需要评估多少个静态页面？（大致数量）

4. 需要评估多少个动态页面？（大致数量）

5. 是否会提供源代码？

6. 是否会提供相关文档？
   
   - 如果是，具体是什么类型的文档？

7. 是否计划对该应用进行静态分析？

8. 客户是否希望对该应用进行模糊测试？

9. 客户是否希望进行基于角色的测试？

10. 客户是否希望执行凭证扫描？

### 7.3 无线网络渗透测试

1. 有多少个无线网络？

2. 是否有访客无线网络？如果有：
   
   - 访客网络是否需要认证？

3. 无线网络使用什么加密类型？

4. 覆盖区域面积是多少平方英尺？

5. 是否需要查找不明设备？

6. 是否会评估针对客户端的无线攻击？

7. 使用无线网络的客户端大约有多少？

### 7.4 物理渗透测试

1. 需要评估多少个地点？

2. 这个地点是否为共享设施？如果是：
   
   - 多少个楼层在评估范围内？
   - 哪些楼层在评估范围内？

3. 是否需要绕过安保人员？如果是：
   
   - 保安是否由第三方雇佣？
   - 他们是否持有武器？
   - 他们是否被允许使用武力？

4. 建筑有多少个入口？

5. 是否允许使用开锁工具或撞锁钥匙？（需考虑当地法律）

6. 此次测试是为了验证现有政策和程序的合规性还是进行审计？

7. 评估范围内的区域面积是多少平方英尺？

8. 所有物理安全措施是否有记录？

9. 是否使用了摄像头？
   
   - 如果是客户自有摄像头：团队是否应尝试访问视频存储地点？

10. 是否使用了武装报警系统？如果是：
    
    - 报警是否为无声报警？
    - 报警是否由动作触发？
    - 报警是否由门窗开启触发？

### 7.5 社会工程

1. 客户是否提供了希望进行社会工程攻击的电子邮件地址列表？
2. 客户是否提供了希望进行社会工程攻击的电话号码列表？
3. 是否批准通过社会工程获得未经授权的物理访问权限？如果是：
   - 目标人数是多少？

请注意，根据不同的测试级别，可能不需要向业务部门经理、系统管理员和帮助台人员提问。但如果需要，这里有一些示例问题。

### 7.6 业务部门经理的问题

1. 经理是否知晓即将进行的测试？
2. 哪项数据如果被泄露、损坏或删除，会对组织构成最大风险？
3. 是否有验证业务应用程序正常运行的测试和验证程序？
4. 测试人员能否获取应用程序初期开发时的质量保证测试程序？
5. 应用程序数据是否有灾难恢复程序？

### 7.7 系统管理员的问题

1. 是否有易崩溃的系统或运行旧操作系统、未打补丁的系统？
2. 网络上是否存在客户不持有的系统，测试这些系统是否需要额外批准？
3. 是否有变更管理程序？
4. 系统故障的平均修复时间是多少？
5. 是否使用了系统监控软件？
6. 哪些是最关键的服务器和应用程序？
7. 备份是否定期进行测试？
8. 上次恢复备份是什么时候？

## 8 范围蔓延

        范围蔓延是可能导致渗透测试公司面临困境的常见问题。许多公司和管理者往往不清楚如何识别或应对这一问题。

        在应对范围蔓延时，需要牢记以下几点。首先，如果客户对所完成的工作感到满意，他们很可能会要求额外的工作。将这种请求视为一种赞美，并不要犹豫要求额外资金来补偿所花费的额外时间。如果客户拒绝为额外工作付费，通常不值得继续进行。

        第二点尤其重要。当与现有客户合作时，要注意保持合理的价格。利用机会抬高价格可能会导致失去回头客。由于避免了获取客户的成本，如正式的RFP流程和寻找客户的费用，价格可以适当下调。此外，未来工作的最佳来源是现有客户。善待他们，他们会再次光顾。

## 9 明确起止日期

        战胜范围蔓延的另一个关键措施是明确规定项目的起始和结束日期，这样项目就有明确的结束时间。范围蔓延最常见的领域之一是重新测试。重新测试在获取合同时听起来是个好主意，因为它显示公司关心并负责，确保客户的安全。但问题在于，重新测试的工作往往不会在未完成之前获得报酬。

        为降低这一风险，可以在合同中加入一条声明，规定所有重新测试必须在最终报告交付后的某个时间范围内完成。重新测试的责任在于测试人员。如果客户要求延长期限，可以允许，但条件是付款必须在原定日期完成。最后，确保重新测试的质量。记住，现有客户是未来工作的最佳来源。

## 10 明确IP范围和域名

        在开始渗透测试之前，必须确定所有目标。这些目标应在最初的问卷阶段由客户提供。客户可以以特定IP地址、网络范围或域名的形式提供目标。有时，客户仅提供组织名称，并期望测试人员自行识别其他信息。重要的是要明确防火墙、IDS/IPS或网络设备等系统是否也包含在测试范围内，还应识别和定义上游供应商和其他第三方供应商是否在测试范围内。

### 10.1 验证范围

        在开始攻击目标之前，务必确认这些目标确实由您为其进行测试的客户拥有。考虑到如果您攻击并成功进入一台机器，而后发现它实际上属于其他组织（例如医院或政府机构），可能会带来的法律后果。

## 11 处理第三方

        在某些情况下，测试项目可能涉及对第三方托管的服务或应用程序进行测试。随着“云”服务的流行，这种情况越来越常见。重要的是要记住，尽管客户可能已授权测试，但他们不能代表其第三方服务提供商。因此，您还需要从第三方获得许可，以便测试托管的系统。未获得适当许可可能会导致法律问题，带来诸多麻烦。

### 11.1 云服务

        测试云服务的最大挑战在于，多个不同组织的数据可能存储在同一物理介质上，且这些数据域之间的安全措施可能比较松散。需要通知云服务提供商测试的进行，并获得他们的许可。此外，需要指定一个云服务提供商的安全联系人，以便在发现可能影响其他云客户的安全漏洞时进行沟通。一些云提供商有专门的程序供渗透测试人员遵循，并可能要求填写请求表格、安排测试时间或获得明确许可后才能开始测试。

### 11.2 互联网服务提供商（ISP）

        与客户核实ISP的服务条款。在许多商业环境中，ISP会就测试设置特定条款。在发起攻击之前，仔细阅读这些条款。在某些情况下，ISP会拒绝并阻止被视为恶意的流量。客户可能会接受这一风险，但必须在开始前明确沟通。与所有其他第三方一样，需要与网络托管提供商明确沟通测试的范围和时间。此外，在与客户沟通时，确保明确说明测试仅限于寻找网络漏洞，不会涉及底层基础设施的漏洞，这些漏洞可能仍然为应用程序的安全提供隐患。

### 11.3 托管安全服务提供商（MSSPs）

        托管安全服务提供商也可能需要被通知测试的进行。具体来说，当测试涉及他们所拥有的系统和服务时，需提前告知。然而，在某些情况下，如果测试的一部分是为了评估MSSP的响应时间，则不应提前通知，以维护测试的完整性。一般来说，任何时候测试涉及MSSP明确拥有的设备或服务时，都需要通知他们。

### 11.4 服务器所在国家/地区

        验证服务器所在的国家/地区对测试人员非常重要。在确认国家/地区后，应在开始测试之前查阅该地区的相关法律。不要假设公司的法律团队会为测试人员提供详细的当地法律概况，也不要假设公司会承担测试人员违反法律的责任。每位测试人员都有责任在测试前核实所测试地区的法律，因为最终责任在于测试人员自己。

## 12 定义可接受的社会工程借口

        许多组织希望通过模拟当前攻击方式来测试其安全态势。如今，社会工程和鱼叉式网络钓鱼攻击被广泛应用。尽管许多成功的攻击借用了诸如性、毒品和摇滚乐（分别指色情、伟哥和免费iPod）等借口，但在企业环境中，这些借口可能并不合适。在测试开始前，请确保为测试选择的借口已获得书面批准。

## 13 拒绝服务（DoS）测试

        在进行测试之前，应讨论压力测试或拒绝服务测试。由于这些测试可能具有破坏性，许多组织可能不愿意深入讨论。如果组织只关注数据的机密性或完整性，可能无需进行压力测试；但如果组织还关注服务的可用性，应在与生产环境类似的非生产环境中进行压力测试。

## 14 付款条件

        许多测试人员常常忽略测试准备的一个重要方面：如何获得报酬。与合同日期一样，付款应有明确的日期和条款。大型组织常常尽可能地延迟付款。以下是一些常见的付款方式，仅作示例。建议每个组织根据自身及客户的需求制定和调整自己的定价结构。在测试开始前确立清晰的付款结构是至关重要的。

### 14.1 净30天

        总金额需在最终报告交付后的30天内支付。通常这种付款方式会附带未付款的每月百分比罚款。支付期限可以根据需要设定为其他天数（如45天或60天）。

### 14.2 预付一半

        在测试开始前要求预付总费用的一半是常见做法，尤其是在较长期的项目中。

### 14.3 定期付款

        定期付款计划常用于长期项目。例如，有些项目可能持续一年或两年。让客户在整个项目期间定期分期付款是一种常见方式。

## 15 目标

        每个渗透测试都应以明确的目标为导向，即识别可能危及客户业务或任务目标的具体漏洞。重点在于发现可能对组织产生负面影响的风险，而不是简单地寻找未修补的系统。

### 15.1 主要目标

        测试的主要目标不应仅仅由合规性驱动，原因有很多。首先，合规性并不等同于安全性。虽然许多组织因合规要求而进行测试，但这不应成为测试的首要目标。例如，一家公司可能因满足PCI-DSS要求而进行渗透测试。

        处理信用卡信息的公司不在少数。然而，使目标组织在竞争市场中保持独特性和竞争力的特质一旦受损，将产生最大的影响。信用卡系统遭到破坏无疑是严重的问题，但如果信用卡号码及所有相关客户数据泄露，则将是灾难性的。

### 15.2 次要目标

        次要目标直接与合规性相关。主要目标和次要目标常常密切相关。例如，在以PCI-DSS为驱动的测试中，获取信用卡信息是次要目标，而将数据泄露与组织的业务或任务驱动因素联系起来则是主要目标。次要目标在合规性和/或IT方面具有意义，而主要目标则能够引起高层管理的关注。

### 15.3 业务分析

        在进行渗透测试之前，评估客户安全状况的成熟度是很有必要的。有些组织倾向于直接进入渗透测试，而不先评估其成熟度。对于安全计划尚不成熟的客户，通常建议先进行漏洞分析。

        有些测试人员认为漏洞分析（VA）工作带有偏见。然而，他们忘记了测试的目标是识别目标组织的风险，而不是追求所谓的“明星”生活方式。如果一家公司尚未准备好进行全面的渗透测试，那么进行高质量的漏洞分析会比渗透测试带来更多价值。

        提前与客户确认他们将提供的系统信息。询问已记录的漏洞信息也可能很有帮助。这将节省测试人员的时间，并避免已知问题的重复测试，为客户节约成本。同样地，如果合规性没有绝对要求，全面或部分白盒测试可能比黑盒测试为客户带来更大价值。

## 16 建立沟通渠道

        在任何渗透测试中，与客户的沟通都是至关重要的。您与客户互动的频率和方式会极大地影响他们的满意度。以下是一个沟通框架，有助于让客户对测试活动感到安心。

### 17 紧急联系信息

        能够在紧急情况下联系客户或目标组织是至关重要的。紧急情况可能发生，因此必须事先建立联系点以便及时处理。制定一个紧急联系人列表。该列表应涵盖测试范围内所有相关方的联系信息。创建后，应将紧急联系人列表分享给所有相关人员。请注意，目标组织可能并不是客户本身。

        为每位紧急联系人收集以下信息：

- 全名
- 职务及其在操作中的责任
- 授权权限（如未明确），以讨论测试活动的细节
- 两种24/7全天候即时联系方式，例如手机、传呼机或家庭电话（如可能）
- 一种安全的大数据传输方式，例如SFTP或加密电子邮件

        注意：类似帮助台或操作中心的团队电话号码可以代替一个紧急联系人，前提是其能够24/7全天候服务。每次渗透测试的性质会影响紧急联系人列表中应包括的人员。不仅需要提供客户和目标的联系信息，他们也可能需要在紧急情况下联系测试人员。列表最好包括以下人员：

- 参与项目的所有渗透测试人员
- 测试组的经理
- 每个目标组织的两位技术联系人
- 客户的两位技术联系人
- 客户的一个高级管理或业务联系人

        上述列表中可能会有一些角色重叠。例如，目标组织可能就是客户，测试组的经理可能也亲自参与渗透测试，或者客户的技术联系人可能也担任高级管理职务。建议为每个相关方指定一位联系人，负责领导和代表该组织。

## 17.1 事件报告流程

        在项目开始前讨论组织的现有事件响应能力是非常重要的，原因有几个。渗透测试的一部分不仅是评估组织的安全措施，还包括测试其事件响应能力。

        如果整个测试过程中目标组织的内部安全团队都未能察觉任何异常，这表明其安全防护存在重大缺口。此外，确保在测试开始前，目标组织内有相关人员知晓测试的具体时间安排是很重要的，以避免事件响应团队因误认为受到攻击或入侵而半夜联系高层管理人员。

### 17.2 事件定义

        根据美国国家标准与技术研究院（NIST）的定义，事件是指：“违反或即将违反计算机安全政策、可接受使用政策或标准安全实践的行为。”（《计算机安全事件处理指南》- 特别出版物800-61修订版1）。事件也可能发生在物理层面，例如通过某种方式获得未授权的物理访问权限。目标组织应为不同类型的事件设定不同的分类和等级。

### 17.3 状态报告频率

        状态报告的频率可以差异很大。影响报告安排的因素包括测试的总时长、测试范围以及目标组织的安全成熟度。一个有效的时间表可以增强客户的参与感，被忽视的客户可能会选择不再合作。

        一旦状态报告的频率和时间表确定后，就必须严格执行。虽然推迟或延迟状态报告有时是必要的，但不应成为常态。如有必要，可以与客户协商同意新的时间安排。尽量避免完全跳过状态报告，这是不专业的行为。

### 17.4 PGP及其他替代方案

        加密是不可或缺的。在渗透测试中，与客户的沟通至关重要，由于沟通内容的敏感性，尤其是最终报告，敏感信息必须进行加密。在测试开始前，必须与客户建立一个安全的通信渠道。以下是几种常见的加密方式：

- PGP/GPG：可用于电子邮件通信，并加密最终报告（请注意，邮件的主题行是以明文形式传输的）
- 在客户网络上托管的安全邮箱
- 电话
- 面对面会议

        传递最终报告时，可以将报告存储在AES加密的压缩档案中，但请确保使用的压缩工具支持CBC模式的AES加密。此外，询问客户哪些信息可以以书面形式传达，哪些只能通过口头交流。一些组织对书面传递的安全信息有限制，是出于非常合理的原因。

## 18 交战规则

        测试范围定义了测试的内容，而交战规则则定义了测试的执行方式。这两个方面需要分别独立处理。

### 18.1 时间表

        在制定计划时，应参与制定明确的时间表。虽然测试范围定义了工作的开始和结束，但参与规则则确定了这期间的所有细节。需要理解的是，时间表可能会随着测试的进展而有所变动。然而，制定时间表的目的并不是严格约束进度，而是在测试开始时为所有参与者提供一个清晰的蓝图，明确待完成的任务及其负责人。甘特图和工作分解结构（WBS）通常用于定义任务及其所需时间。通过这种方式分解时间表，有助于参与者识别所需资源的应用位置，并帮助客户识别测试期间可能遇到的障碍。

        网上有许多免费的甘特图工具，许多管理人员对这些工具十分关注，因此它们是与目标组织高层管理人员沟通的理想媒介。

### 18.2 位置

        任何合作项目的另一个需要提前与客户确认的参数是测试期间测试人员需要前往的地点。这可能相对简单，比如安排当地的住宿，或者复杂如确定某个特定国家的适用法律。

        在多个地点和地区开展业务的公司并不少见，这需要选择几个站点进行测试。在这种情况下，应该尽量避免亲自到访每个客户地点，而是选择通过VPN连接这些站点进行远程测试。

        虽然获取敏感信息可能是某些合作项目的目标之一，但某些信息实际上不应被查看或下载。对于新测试人员来说，这可能显得不太寻常，但在许多情况下，测试人员不应持有目标数据。例如，根据《健康保险携带与责任法案》（HIPAA），个人健康信息（PHI）必须受到保护。在一些情况下，目标系统可能没有防火墙或防病毒软件来保护数据。在这些情况下，测试人员应绝对避免获取任何个人身份信息（PII）。

        那么，如果无法实际获取数据，如何证明测试人员确实获得了信息的访问权限呢？这个问题可以通过多种方式解决。可以截取数据库架构和文件权限的屏幕截图，或者显示文件本身而不打开它们以展示内容，只要文件名中不含有可见的PII即可。

        测试人员在约定中应保持多谨慎是需要与客户讨论的参数，但无论客户意见如何，测试公司始终应确保在法律上保护自己。不论是否可能接触到敏感数据，每次合作后都应彻底清理所有报告模板和测试设备。特别提醒，如果测试人员发现非法数据（如儿童色情内容），应立即通知相关执法机关，然后通知客户。不要仅听从客户的指示。

### 18.3 证据处理

        在处理测试证据和撰写报告的不同阶段时，必须对数据保持高度谨慎。始终使用加密技术，并在每次测试后对测试设备进行清理。切勿在安全会议上分发包含测试报告的USB闪存盘。此外，绝不要将其他客户的报告作为模板重复使用，因为在文档中留下其他组织的引用是非常不专业的行为。

### 18.4 定期状态会议

        在测试过程中，定期与客户召开会议以更新测试的总体进展情况是非常重要的。这些会议应每天召开，并保持简短。会议应围绕三个主题展开：计划、进展和问题。

        计划的讨论旨在确保测试不会在重大计划外变更或系统故障期间进行。进展部分则是向客户汇报已完成的工作。而对于存在的问题，应在会议中提及，但关于解决方案的详细讨论应尽量在线下进行以节省时间。

### 18.5 测试时间安排

        一些客户要求所有测试必须在非工作时间进行，这可能意味着大部分测试人员需要在夜间工作。因此，在测试开始前，应与客户明确沟通测试时间的具体要求。

### 18.6 处理排斥（Shunning）

        有时排斥是可以接受的，但在某些情况下可能不符合测试的目的。例如，在进行全面的黑盒测试时，不仅是测试技术，还要测试目标组织的安全团队能力，此时排斥是合适的。然而，当与目标组织的安全团队协调测试多个系统时，排斥攻击可能不利于测试的整体目标。

### 18.7 测试许可

        在进行渗透测试时，必须获取一份关键文件，即《测试许可》文件。该文件明确列出测试范围，并包含签名以确认相关方知悉测试活动。此外，文件中应清晰说明，测试可能导致系统不稳定，而测试人员会尽力避免系统崩溃。然而，由于测试可能引发不稳定，客户同意不将任何系统不稳定或崩溃归咎于测试人员。测试必须在客户签署此文件后方可开始。

        另外，一些服务提供商要求在测试其系统之前提前通知和/或获得单独许可。例如，亚马逊要求在其云平台上扫描任何主机之前，必须填写并批准在线请求表单。如果有这类要求，应在文件中明确说明。

### 18.8 法律考量

        渗透测试中的某些活动可能违反当地法律。因此，建议在实施地核查常见渗透测试任务的合法性。例如，在渗透测试过程中捕获的任何VOIP通话，在某些地区可能被视为窃听。

## 19 能力与技术评估

        优秀的渗透测试不仅限于查找未修补的系统漏洞，还评估目标组织的能力。为此，以下是测试过程中可以评估的一些能力：

- 侦测和响应信息收集的能力
- 侦测和响应网络探测的能力
- 侦测和响应扫描及漏洞分析的能力
- 侦测和响应渗透（攻击）的能力
- 侦测和响应数据聚合的能力
- 侦测和响应数据泄漏的能力

在跟踪这些信息时，请确保记录时间信息。例如，如果某次扫描被侦测到，应及时得到通知，并记录当时正在进行的扫描级别。

[返回一页](./../README.md)         [下一页]()
